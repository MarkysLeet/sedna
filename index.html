<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–∫—Ä–∏–ø—Ç–∞ –æ—Ç–∑—ã–≤–∞</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 24px;
      line-height: 1.5;
    }

    label {
      display: block;
      margin-top: 16px;
      font-weight: 600;
    }

    textarea {
      width: 100%;
      box-sizing: border-box;
      padding: 8px;
      font-family: "Courier New", monospace;
      font-size: 14px;
      border: 1px solid #ccc;
      border-radius: 4px;
      min-height: 120px;
      resize: vertical;
    }

    #categories {
      min-height: 360px;
    }

    #output {
      min-height: 280px;
      margin-top: 16px;
    }

    #generated-review {
      min-height: 120px;
      margin-top: 12px;
    }

    button {
      margin-top: 20px;
      padding: 10px 18px;
      font-size: 15px;
      border: none;
      border-radius: 4px;
      background-color: #1976d2;
      color: #fff;
      cursor: pointer;
    }

    button:hover {
      background-color: #135da6;
    }

    .note {
      margin-top: 12px;
      font-size: 13px;
      color: #444;
    }
  </style>
</head>
<body>
  <h1>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–∫—Ä–∏–ø—Ç–∞ –æ—Ç–∑—ã–≤–∞</h1>

  <label for="positive-text">–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ –æ—Ç–∑—ã–≤–µ (–∞–∫—Ü–µ–Ω—Ç):</label>
  <textarea id="positive-text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –≥–æ—Å—Ç—å –æ—á–µ–Ω—å –¥–æ–≤–æ–ª–µ–Ω –∞–∫–≤–∞–ø–∞—Ä–∫–æ–º –∏ –æ—Å–Ω–æ–≤–Ω—ã–º —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–º"></textarea>

  <label for="categories">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ (–ø–æ –æ–¥–Ω–æ–π –≤ —Å—Ç—Ä–æ–∫–µ):</label>
  <textarea id="categories">
KLIMA SOGUTMUYOR/ISITMIYOR-TEKNIK SERVIS BILDIRIMLERI
ODA GIDER KOKUSU-TEKNIK SERVIS BILDIRIMLERI
TEKNIK ARIZLARIN GIDERILME SURESI-TEKNIK SERVIS BILDIRIMLERI
TEKNIK PERSONEL YAKLASIMI-TEKNIK SERVIS BILDIRIMLERI
GIRISTE ODA ARIZALARI-TEKNIK SERVIS BILDIRIMLERI
TV KANALLARI-TEKNIK SERVIS BILDIRIMLERI
SPOR AKTIVITE-GENEL BILDIRIMLER
GENEL MUZIK YAYINI-MUZIK BILDIRIMLERI
SINEMA-GENEL BILDIRIMLER
DISARIDAN ALINAN CANLI SHOWLAR-EGLENCE AKTIVITE BILDIRIMLERI
ANIMASYON PERSONEL YAKLASIMI-GENEL BILDIRIMLER
CANLI MUZIK-MUZIK BILDIRIMLERI
AKSAM AKTIVITELERI-EGLENCE AKTIVITE BILDIRIMLERI
ACIK DISKO-GENEL BILDIRIMLER
ANFI TIYATRO YER-GENEL BILDIRIMLER
DISKO MALZEME-GENEL BILDIRIMLER
DISKO SAATLERI-GENEL BILDIRIMLER
FITNESS (MALZEME)-GENEL BILDIRIMLER
GUVENLIK KAPI KARSILAMA-GUVENLIK BILDIRIMLERI
CANKURTARAN-GUVENLIK BILDIRIMLERI
GUVENLIK PERSONELI-GUVENLIK BILDIRIMLERI
YAN ODA GURULTU-GURULTU
KAYIP-BULUNMUS ESYA SIKAYETLERI-KONSEPT BILDIRIMLERI
GUVENLIK SORUN COZME-GUVENLIK BILDIRIMLERI
AQUAPARK ALANI TEMIZLIGI-GENEL ALAN BILDIRIMLERI
HAVLU-EKSIK BIRAKILAN MALZEME
BORNOZ-EKSIK BIRAKILAN MALZEME
TERLIK-EKSIK BIRAKILAN MALZEME
YASTIK-EKSIK BIRAKILAN MALZEME
LOSYON-EKSIK BIRAKILAN MALZEME
CARSAF TEMIZLIGI-LINEN/TEKSTIL TEMIZLIGI
HALI TEMIZLIGI-LINEN/TEKSTIL TEMIZLIGI
ODA KOKUSU-ODA BILDIRIMLERI
BUKLET MALZEMELERI-EKSIK BIRAKILAN MALZEME
ZEMIN TEMIZLIGI-ODA BILDIRIMLERI
HAVUZ CEVRESI TEMIZLIGI VE DUZENI-GENEL ALAN BILDIRIMLERI
EK YATAK OLMAMASI-ODA BILDIRIMLERI
FAMILY CLUB HK PERSONEL-PERSONEL BILDIRIMLERI
ODA TEMIZLIGI-ODA BILDIRIMLERI
RESTORAN ALANI TEMIZLIGI-GENEL ALAN BILDIRIMLERI
BANYO TEMIZLIGI-ODA BILDIRIMLERI
YATAK KALITESI-ODA BILDIRIMLERI
GENCLIK KULUBU 13-17 YAS-MINI KULUP BILDIRIMLERI
COCUK AKTIVITE CESITLILIK-MINI KULUP BILDIRIMLERI
MINI KULUP VE BAKIM HIZMETLERI-MINI KULUP BILDIRIMLERI
MINI KULUP PERSONEL YAKLASIMI-MINI KULUP BILDIRIMLERI
YABANCI DIL YETERLILIGI-MINI KULUP BILDIRIMLERI
MINI DISKO-MINI KULUP BILDIRIMLERI
ASISTANLIK HIZMETI-MISAFIR ILISKILERI BILDIRIMLERI
CHECK OUT ISLEMLERI-ONBURO BILDIRIMLERI
RESEPSIYON HIZMET HIZI VE GULERYUZ-ONBURO BILDIRIMLERI
BELLBOY HIZMETI-ONBURO BILDIRIMLERI
ANAHTAR - KAPIYI ACMAMASI-ONBURO BILDIRIMLERI
ERKEN GIRIS/GEC CIKIS -ONBURO BILDIRIMLERI
ICECEK ZEHIRLENMESI-YIYECEK ICECEK DIGER
FAMILY CLUB HAVUZ BAR SERVIS KALITESI-BAR HIZMET KALITESI
FAMILY RESTORAN SERVIS KALITESI-RESTORAN HIZMET KALITESI
7/24 BAR PERSONEL YAKLASIMI-PERSONEL BILDIRIMLERI
DONDURMA EVI SERVIS KALITESI-RESTORAN HIZMET KALITESI
DISKO BAR SERVIS KALITESI-BAR HIZMET KALITESI
FB GENEL PERSONEL YAKLASIMI-PERSONEL BILDIRIMLERI
SERVIS HIJYEN-GENEL BILDIRIMLER
RESTORAN MASA SUSLEME HIZMETI-GENEL BILDIRIMLER
LUBNAN RESTORAN SERVIS KALITESI-RESTORAN HIZMET KALITESI
LUBNAN RESTORAN PERSONEL YAKLASIMI-PERSONEL BILDIRIMLERI
PASTANE SERVIS KALITESI-RESTORAN HIZMET KALITESI
DONDURMA EVI PERSONEL YAKLASIMI-PERSONEL BILDIRIMLERI
POOL SNACK RESTORAN PERSONEL YAKLASIMI-PERSONEL BILDIRIMLERI
ARENA POOL BAR PERSONEL YAKLASIMI-PERSONEL BILDIRIMLERI
BALIK RESTORAN SERVIS KALITESI-RESTORAN HIZMET KALITESI
RED BAR SERVIS KALITESI-BAR HIZMET KALITESI
GENEL BAR SERVIS KALITESI-BAR HIZMET KALITESI
STEAKHOUSE SERVIS KALITESI-RESTORAN HIZMET KALITESI
ICECEK CESITLILIGI-ICECEK BILDIRIMLERI
7/24 RESTORAN PERSONEL YAKLASIMI-PERSONEL BILDIRIMLERI
GOZLEME KOSESI SERVIS KALITESI-RESTORAN HIZMET KALITESI
ARENA POOL BAR SERVIS KALITESI-BAR HIZMET KALITESI
WASABI RESTORAN PERSONEL YAKLASIMI-PERSONEL BILDIRIMLERI
ANA RESTORAN PERSONEL YAKLASIMI-PERSONEL BILDIRIMLERI
CATAL-BICAK-TABAK-KASIK-BARDAK TEMIZLIGI-GENEL BILDIRIMLER
STEAK HOUSE RESTORAN PERSONEL YAKLASIMI-PERSONEL BILDIRIMLERI
SMOOTHIE BAR SERVIS KALITESI-BAR HIZMET KALITESI
RED BAR PERSONEL YAKLASIMI-PERSONEL BILDIRIMLERI
GENEL RESTORAN SERVIS KALITESI-RESTORAN HIZMET KALITESI
ANA RESTORAN SERVIS KALITESI-RESTORAN HIZMET KALITESI
ITALYAN RESTORAN PERSONEL YAKLASIMI-PERSONEL BILDIRIMLERI
ICECEK KALITESI-ICECEK BILDIRIMLERI
BALIK RESTORAN PERSONEL YAKLASIMI-PERSONEL BILDIRIMLERI
WASABI RESTORAN SERVIS KALITESI-RESTORAN HIZMET KALITESI
FB PERSONEL SAYISI-PERSONEL BILDIRIMLERI
LUNAPARK ALANI-GENEL ALAN BILDIRIMLERI
DENIZLE ILGILI KONULAR-GENEL ALAN BILDIRIMLERI
ACENTE SIKAYETLERI-DIS FIRMA BILDIRIMLERI
TADILAT/ INSAAT GURULTU-GURULTU
GENEL PERSONEL YAKLASIMI-PERSONEL BILDIRIMLERI
AQUAPARK CALISMA SAATLERI-KONSEPT BILDIRIMLERI
FUTBOL SAHASI-GENEL ALAN BILDIRIMLERI
GENEL MEMNUNIYET-MEMNUNIYET BILDIRIMLERI
BILGILENDIRME PANOLARI-GENEL ALAN BILDIRIMLERI
FAMILY CLUB KONSEPT-KONSEPT BILDIRIMLERI
SAGLIK VE GUVENLIK-SAGLIK VE GUVENLIK BILDIRIMLERI
DUKKAN-DIS FIRMA BILDIRIMLERI
AQUAPARK KONUM/ALAN-GENEL ALAN BILDIRIMLERI
MARKET-DIS FIRMA BILDIRIMLERI
KIS BAHCESI BILDIRIMLERI-GENEL ALAN BILDIRIMLERI
ODA KONUMU-ODA BILDIRIMLERI
VOLEYBOL SAHASI-GENEL ALAN BILDIRIMLERI
OTEL HIZMET KALITESI-MEMNUNIYET BILDIRIMLERI
FOTOGRAFCI-DIS FIRMA BILDIRIMLERI
KONSEPT-KONSEPT BILDIRIMLERI
THE LAND OF LEGEND HIZMETI-KONSEPT BILDIRIMLERI
BUGGY YETERSIZLIGI-KAPASITE BILDIRIMLERI
HAVUZ ALANI KAPASITESI-KAPASITE BILDIRIMLERI
NARGILE HIZMETI-DIS FIRMA BILDIRIMLERI
ANA RESTORAN KAPASITE YETERSIZ-KAPASITE BILDIRIMLERI
YAN OTEL GURULTU-GURULTU
ODA RUTUBET KOKUSU-ODA BILDIRIMLERI
SPA TEMIZLIK/HIJYEN-DIS FIRMA BILDIRIMLERI
SPA REZERVASYONU-DIS FIRMA BILDIRIMLERI
HAMAM/SAUNA HIZMETI-DIS FIRMA BILDIRIMLERI
ANA RESTORAN YEMEK CESITLILIGI-YEMEK CESITLILIGI
TURK RESTORAN YEMEK KALITESI-YEMEK KALITESI
FAMILY RESTORAN YEMEK KALITESI-YEMEK KALITESI
GOZLEME KOSESI YEMEK SUNUMU-YEMEK SUNUMU
PASTANE URUN SUNUMU-YEMEK SUNUMU
PASTANE URUN KALITESI-YEMEK KALITESI
GOZLEME KOSESI YEMEK LEZZETI-YEMEK LEZZETI
COCUK BUFESI-OZELLIKLI YEMEK HIZMETI
TURK RESTORAN YEMEK CESITLILIGI-YEMEK CESITLILIGI
PASTANE URUN LEZZETI-YEMEK LEZZETI
STEAKHOUSE RESTORAN YEMEK LEZZETI-YEMEK LEZZETI
WASABI RESTORAN YEMEK LEZZETI-YEMEK LEZZETI
PASTANE URUN CESITLILIGI-YEMEK CESITLILIGI
GENEL YEMEK SUNUMU-YEMEK SUNUMU
ITALYAN RESTORAN YEMEK CESITLILIGI-YEMEK CESITLILIGI
ANA RESTORAN YEMEK SUNUMU-YEMEK SUNUMU
BALIK RESTORAN YEMEK SUNUMU-YEMEK SUNUMU
GIDA ZEHIRLENMESI-MUTFAK DIGER
STEAKHOUSE YEMEK CESITLILIGI-YEMEK CESITLILIGI
YEMEKLER SOGUK SIKAYETI-GENEL BILDIRIMLER
BALIK RESTORAN YEMEK CESITLILIGI-YEMEK CESITLILIGI
WASABI RESTORAN YEMEK KALITESI-YEMEK KALITESI
ANA RESTORAN YEMEK LEZZETI-YEMEK LEZZETI
WASABI RESTORAN YEMEK CESITLILIGI-YEMEK CESITLILIGI
GENEL YEMEK KALITESI-YEMEK KALITESI
DIYET BUFE HIZMETI-OZELLIKLI YEMEK HIZMETI
POOL SNACK RESTORAN YEMEK CESITLILIGI-YEMEK CESITLILIGI
GENEL YEMEK CESITLILIGI-YEMEK CESITLILIGI
7/24 RESTORAN YEMEK SUNUMU-YEMEK SUNUMU
GOZLEME KOSESI YEMEK KALITESI-YEMEK KALITESI
MUTFAK PERSONEL YAKLASIMI-PERSONEL BILDIRIMLERI
MEYVE CESITLILIGI-YEMEK CESITLILIGI
TURK RESTORAN YEMEK SUNUMU-YEMEK SUNUMU
LUBNAN RESTORAN YEMEK CESITLILIGI-YEMEK CESITLILIGI
LUBNAN RESTORAN YEMEK KALITESI-YEMEK KALITESI
LUBNAN RESTORAN YEMEK SUNUMU-YEMEK SUNUMU
LUBNAN RESTORAN YEMEK LEZZETI-YEMEK LEZZETI
</textarea>

  <button id="generate">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç</button>

  <label for="generated-review">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–∑—ã–≤ (—Ç—É—Ä–µ—Ü–∫–∏–π, –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π):</label>
  <textarea id="generated-review" readonly></textarea>

  <p id="selected-categories-info" class="note"></p>

  <label for="output">–ì–æ—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª—å:</label>
  <textarea id="output" readonly></textarea>

  <script>
    function normalize(str) {
      return (str || '')
        .replace(/\s+/g, ' ')
        .trim()
        .toUpperCase()
        .replace(/ƒ∞/g, 'I')
        .replace(/IÃá/g, 'I')
        .replace(/≈û/g, 'S')
        .replace(/ƒû/g, 'G')
        .replace(/√ú/g, 'U')
        .replace(/√ñ/g, 'O')
        .replace(/√á/g, 'C');
    }

    function escapeForSingleQuote(value) {
      return value
        .replace(/\\/g, '\\\\')
        .replace(/'/g, "\\'");
    }

    const topicRules = [
      {
        name: 'generalPositive',
        keywords: [
          /–¥–æ–≤–æ–ª–µ–Ω/i,
          /–¥–æ–≤–æ–ª—å–Ω/i,
          /–ø–æ–Ω—Ä–∞–≤/i,
          /–ª—é–±–∏–º/i,
          /—Å—É–ø–µ—Ä/i,
          /–ø—Ä–µ–∫—Ä–∞—Å/i,
          /–æ—Ç–ª–∏—á/i,
          /—à–∏–∫–∞—Ä/i,
          /–≤–æ—Å—Ç–æ—Ä–≥/i,
          /—Ä–µ–∫–æ–º–µ–Ω–¥—É/i,
          /–ø—Ä–∏—è—Ç–Ω/i,
          /—Ä–∞–¥/i
        ],
        sentences: [
          'Misafir tatilinden cok memnun kaldƒ±.',
          'Pozitif deneyimini ictenlikle tavsiye ediyor.'
        ],
        categories: [
          'GENEL MEMNUNIYET-MEMNUNIYET BILDIRIMLERI',
          'OTEL HIZMET KALITESI-MEMNUNIYET BILDIRIMLERI'
        ]
      },
      {
        keywords: [/–∞–∫–≤–∞–ø–∞—Ä–∫/i, /–≤–æ–¥–Ω/i, /–≥–æ—Ä–∫/i],
        sentences: [
          'Misafir aquapark alanindaki kaydiraklarin eglenceli oldugunu belirtti.'
        ],
        categories: [
          'AQUAPARK KONUM/ALAN-GENEL ALAN BILDIRIMLERI',
          'AQUAPARK ALANI TEMIZLIGI-GENEL ALAN BILDIRIMLERI'
        ]
      },
      {
        keywords: [/–æ—Å–Ω–æ–≤–Ω[^.?!]*—Ä–µ—Å—Ç–æ—Ä–∞–Ω/i, /–≥–ª–∞–≤–Ω[^.?!]*—Ä–µ—Å—Ç–æ—Ä–∞–Ω/i, /—à–≤–µ–¥—Å–∫[^.?!]*—Å—Ç–æ–ª/i],
        sentences: [
          'Misafir ana restoranda sunulan yemeklerin lezzetini ve cesitliligini cok begendi.'
        ],
        categories: [
          'ANA RESTORAN YEMEK LEZZETI-YEMEK LEZZETI',
          'ANA RESTORAN YEMEK CESITLILIGI-YEMEK CESITLILIGI',
          'ANA RESTORAN SERVIS KALITESI-RESTORAN HIZMET KALITESI',
          'ANA RESTORAN PERSONEL YAKLASIMI-PERSONEL BILDIRIMLERI',
          'ANA RESTORAN YEMEK SUNUMU-YEMEK SUNUMU'
        ]
      },
      {
        keywords: [/—Ä–µ—Å—Ç–æ—Ä–∞–Ω/i, /–ø–∏—Ç–∞–Ω–∏/i, /—Å—Ç–æ–ª–æ–≤/i],
        sentences: [
          'Misafir restoran hizmetlerinin duzenini ve hijyenini takdir etti.'
        ],
        categories: [
          'GENEL RESTORAN SERVIS KALITESI-RESTORAN HIZMET KALITESI',
          'GENEL YEMEK KALITESI-YEMEK KALITESI',
          'GENEL YEMEK CESITLILIGI-YEMEK CESITLILIGI',
          'GENEL YEMEK SUNUMU-YEMEK SUNUMU',
          'RESTORAN ALANI TEMIZLIGI-GENEL ALAN BILDIRIMLERI',
          'SERVIS HIJYEN-GENEL BILDIRIMLER'
        ]
      },
      {
        keywords: [/–¥–µ—Å–µ—Ä—Ç/i, /—Å–ª–∞–¥–æ—Å—Ç/i, /–ø–∏—Ä–æ–∂/i, /–ø–∞—Å—Ç–∞/i, /–º–æ—Ä–æ–∂–µ–Ω/i],
        sentences: [
          'Misafir pastane ve tatli seceneklerinin lezzetini ovdu.'
        ],
        categories: [
          'PASTANE URUN LEZZETI-YEMEK LEZZETI',
          'PASTANE URUN CESITLILIGI-YEMEK CESITLILIGI',
          'PASTANE URUN SUNUMU-YEMEK SUNUMU',
          'PASTANE SERVIS KALITESI-RESTORAN HIZMET KALITESI',
          'DONDURMA EVI SERVIS KALITESI-RESTORAN HIZMET KALITESI',
          'DONDURMA EVI PERSONEL YAKLASIMI-PERSONEL BILDIRIMLERI'
        ]
      },
      {
        keywords: [/–±–∞—Ä/i, /–∫–æ–∫—Ç–µ–π/i, /–Ω–∞–ø–∏—Ç/i, /–±–∞—Ä–º–µ–Ω/i],
        sentences: [
          'Misafir bar servisindeki hizli ve guler yuzlu yaklasimi begendi.'
        ],
        categories: [
          'GENEL BAR SERVIS KALITESI-BAR HIZMET KALITESI',
          'ICECEK CESITLILIGI-ICECEK BILDIRIMLERI',
          '7/24 BAR PERSONEL YAKLASIMI-PERSONEL BILDIRIMLERI'
        ]
      },
      {
        keywords: [/–ø–µ—Ä—Å–æ–Ω–∞–ª/i, /—Å–æ—Ç—Ä—É–¥–Ω–∏–∫/i, /staff/i, /–∫–æ–º–∞–Ω–¥–∞/i, /–≥–∏–¥/i],
        sentences: [
          'Misafir personelin ilgisi ve guler yuzlu hizmetinden memnun kaldƒ±.'
        ],
        categories: [
          'GENEL PERSONEL YAKLASIMI-PERSONEL BILDIRIMLERI',
          'FB GENEL PERSONEL YAKLASIMI-PERSONEL BILDIRIMLERI'
        ]
      },
      {
        keywords: [/–Ω–æ–º–µ—Ä/i, /–∫–æ–º–Ω–∞—Ç/i, /room/i, /suite/i],
        sentences: [
          'Misafir odanin konforu ve temizliginden memnun kaldƒ±.'
        ],
        categories: [
          'ODA TEMIZLIGI-ODA BILDIRIMLERI',
          'YATAK KALITESI-ODA BILDIRIMLERI'
        ]
      },
      {
        keywords: [/—É–±–æ—Ä–∫/i, /—á–∏—Å—Ç/i, /–≥–∏–≥–∏–µ–Ω/i],
        sentences: [
          'Misafir tesisin genel temizliginin ust duzey oldugunu ifade etti.'
        ],
        categories: [
          'RESTORAN ALANI TEMIZLIGI-GENEL ALAN BILDIRIMLERI',
          'HAVUZ CEVRESI TEMIZLIGI VE DUZENI-GENEL ALAN BILDIRIMLERI',
          'AQUAPARK ALANI TEMIZLIGI-GENEL ALAN BILDIRIMLERI',
          'SERVIS HIJYEN-GENEL BILDIRIMLER'
        ]
      },
      {
        keywords: [/–¥–µ—Ç—Å–∫/i, /—Ä–µ–±–µ–Ω/i, /—Å—ã–Ω/i, /–¥–æ—á/i, /kids/i, /—Å–µ–º–µ–π–Ω/i],
        sentences: [
          'Misafir cocuklara yonelik hizmetlerin eglenceli ve guvenli oldugunu soyledi.'
        ],
        categories: [
          'COCUK AKTIVITE CESITLILIK-MINI KULUP BILDIRIMLERI',
          'MINI KULUP PERSONEL YAKLASIMI-MINI KULUP BILDIRIMLERI',
          'MINI KULUP VE BAKIM HIZMETLERI-MINI KULUP BILDIRIMLERI',
          'MINI DISKO-MINI KULUP BILDIRIMLERI',
          'GENCLIK KULUBU 13-17 YAS-MINI KULUP BILDIRIMLERI',
          'FAMILY CLUB KONSEPT-KONSEPT BILDIRIMLERI'
        ]
      },
      {
        keywords: [/—Ä–∞–∑–≤–ª–µ—á/i, /–∞–Ω–∏–º–∞—Ü/i, /—à–æ—É/i, /–∫–æ–Ω—Ü–µ—Ä—Ç/i, /–º—É–∑—ã–∫/i, /–¥–∏—Å–∫–æ—Ç–µ–∫/i],
        sentences: [
          'Misafir animasyon ve eglence programlarinin enerjisinden etkilendi.'
        ],
        categories: [
          'ANIMASYON PERSONEL YAKLASIMI-GENEL BILDIRIMLER',
          'AKSAM AKTIVITELERI-EGLENCE AKTIVITE BILDIRIMLERI',
          'CANLI MUZIK-MUZIK BILDIRIMLERI',
          'DISARIDAN ALINAN CANLI SHOWLAR-EGLENCE AKTIVITE BILDIRIMLERI',
          'ACIK DISKO-GENEL BILDIRIMLER',
          'SINEMA-GENEL BILDIRIMLER'
        ]
      },
      {
        keywords: [/—Å–ø–∞/i, /—Ö–∞–º–∞–º/i, /—Å–∞—É–Ω/i, /–º–∞—Å—Å–∞–∂/i, /wellness/i],
        sentences: [
          'Misafir spa ve wellness hizmetlerini tavsiye etti.'
        ],
        categories: [
          'SPA TEMIZLIK/HIJYEN-DIS FIRMA BILDIRIMLERI',
          'HAMAM/SAUNA HIZMETI-DIS FIRMA BILDIRIMLERI',
          'SPA REZERVASYONU-DIS FIRMA BILDIRIMLERI'
        ]
      },
      {
        keywords: [/–ø–ª—è–∂/i, /–º–æ—Ä/i, /sea/i],
        sentences: [
          'Misafir deniz ve plaj imkanlarini begendi.'
        ],
        categories: [
          'DENIZLE ILGILI KONULAR-GENEL ALAN BILDIRIMLERI'
        ]
      },
      {
        keywords: [/–±–∞—Å—Å–µ–∏–Ω/i, /–±–∞—Å—Å–µ–π–Ω/i, /pool/i, /–∞–∫–≤–∞/i],
        sentences: [
          'Misafir havuz alaninin duzenini ve atmosferini ovdu.'
        ],
        categories: [
          'HAVUZ CEVRESI TEMIZLIGI VE DUZENI-GENEL ALAN BILDIRIMLERI'
        ]
      },
      {
        keywords: [/—Ä–µ—Å–µ–ø—à/i, /—Ä–µ—Ü–µ–ø—Ü/i, /check[- ]?in/i, /check[- ]?out/i, /–≤—ã–µ–∑–¥/i, /–≤—ä–µ–∑–¥/i, /–∑–∞—Å–µ–ª–µ–Ω/i],
        sentences: [
          'Misafir resepsiyon ve giris-cikis sureclerinin duzenli ilerledigini paylasti.'
        ],
        categories: [
          'RESEPSIYON HIZMET HIZI VE GULERYUZ-ONBURO BILDIRIMLERI',
          'CHECK OUT ISLEMLERI-ONBURO BILDIRIMLERI',
          'ERKEN GIRIS/GEC CIKIS -ONBURO BILDIRIMLERI',
          'BELLBOY HIZMETI-ONBURO BILDIRIMLERI'
        ]
      },
      {
        keywords: [/–≥–µ—Å—Ç/i, /guest relation/i, /relation/i, /–∞—Å—Å–∏—Å—Ç/i, /–ø–æ–º–æ—â/i],
        sentences: [
          'Misafir misafir iliskileri ekibinin destekleyici yaklasimindan memnun kaldƒ±.'
        ],
        categories: [
          'ASISTANLIK HIZMETI-MISAFIR ILISKILERI BILDIRIMLERI',
          'FAMILY CLUB HK PERSONEL-PERSONEL BILDIRIMLERI'
        ]
      },
      {
        keywords: [/–º–∞—Ä–∫–µ—Ç/i, /–º–∞–≥–∞–∑–∏–Ω/i, /—à–æ–ø/i, /market/i],
        sentences: [
          'Misafir tesis icindeki dukkan ve alisveris olanaklarini faydali buldu.'
        ],
        categories: [
          'DUKKAN-DIS FIRMA BILDIRIMLERI',
          'MARKET-DIS FIRMA BILDIRIMLERI'
        ]
      },
      {
        keywords: [/—Å–ø–æ—Ä—Ç/i, /—Ñ–∏—Ç–Ω–µ—Å/i, /gym/i],
        sentences: [
          'Misafir spor ve fitness imkanlarinin yeterli oldugunu belirtti.'
        ],
        categories: [
          'FITNESS (MALZEME)-GENEL BILDIRIMLER',
          'SPOR AKTIVITE-GENEL BILDIRIMLER'
        ]
      },
      {
        keywords: [/—ç–∫—Å–∫—É—Ä—Å/i, /–ª–µ–≥–µ–Ω–¥/i, /legend/i],
        sentences: [
          'Misafir The Land of Legend hizmetlerinden memnun kaldƒ±.'
        ],
        categories: [
          'THE LAND OF LEGEND HIZMETI-KONSEPT BILDIRIMLERI'
        ]
      }
    ];

    function analyzeInput(message, categories) {
      const lowerMessage = (message || '').toLocaleLowerCase('tr-TR');
      const availableSet = new Set(categories);
      const normalizedCategories = categories.map(cat => ({ raw: cat, norm: normalize(cat) }));

      const selectedCategories = new Set();
      const reviewParts = [];

      topicRules.forEach(rule => {
        const matched = rule.keywords.some(pattern => pattern.test(lowerMessage));
        if (!matched) {
          return;
        }

        if (rule.sentences) {
          rule.sentences.forEach(sentence => {
            if (!reviewParts.includes(sentence)) {
              reviewParts.push(sentence);
            }
          });
        }

        if (rule.categories) {
          rule.categories.forEach(cat => {
            if (availableSet.has(cat)) {
              selectedCategories.add(cat);
            }
          });
        }

        if (rule.includes) {
          const includeTerms = Array.isArray(rule.includes) ? rule.includes : [rule.includes];
          includeTerms.forEach(term => {
            const normalizedTerm = normalize(term);
            normalizedCategories.forEach(item => {
              if (item.norm.includes(normalizedTerm)) {
                selectedCategories.add(item.raw);
              }
            });
          });
        }
      });

      if (reviewParts.length === 0) {
        reviewParts.push('Misafir tatil deneyimini olumlu sekilde paylasti.');
      }

      const reviewText = reviewParts.join(' ');

      const orderedCategories = categories.filter(cat => selectedCategories.has(cat));

      return {
        reviewText,
        categories: orderedCategories
      };
    }

    document.getElementById('generate').addEventListener('click', function () {
      const positiveInput = document.getElementById('positive-text').value;
      const categoriesInput = document.getElementById('categories').value;

      const categories = categoriesInput
        .split(/\r?\n/)
        .map(line => line.trim())
        .filter(line => line.length > 0);

      const analysis = analyzeInput(positiveInput, categories);
      const autoCategories = analysis.categories;
      const reviewText = analysis.reviewText;

      const normalizedReview = normalize(reviewText);
      const escapedReview = escapeForSingleQuote(normalizedReview);

      const escapedCategories = autoCategories.map(cat => "    '" + escapeForSingleQuote(cat) + "'");
      const categoriesBlock = escapedCategories.length
        ? '\n' + escapedCategories.join(',\n') + '\n  '
        : '\n  ';

      const finalScript = `(async function () {\n  const targetTexts = [${categoriesBlock}];\n\n  const positiveText = '${escapedReview}';\n\n  const searchInput =\n    document.querySelector('#input_3723[ng-model="searchTerm"]') ||\n    document.querySelector('input#input_3723') ||\n    document.querySelector('input[ng-model="searchTerm"]');\n\n  if (!searchInput) {\n    console.warn('–ø–æ–∏—Å–∫–æ–≤–æ–µ –ø–æ–ª–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ');\n    return;\n  }\n\n  function normalize(str) {\n    return (str || '')\n      .replace(/\\s+/g, ' ')\n      .trim()\n      .toUpperCase()\n      .replace(/ƒ∞/g, 'I')\n      .replace(/IÃá/g, 'I')\n      .replace(/≈û/g, 'S')\n      .replace(/ƒû/g, 'G')\n      .replace(/√ú/g, 'U')\n      .replace(/√ñ/g, 'O')\n      .replace(/√á/g, 'C');\n  }\n\n  function realClick(el) {\n    ['mouseover', 'mousedown', 'mouseup', 'click'].forEach(type => {\n      el.dispatchEvent(new MouseEvent(type, {\n        view: window,\n        bubbles: true,\n        cancelable: true\n      }));\n    });\n  }\n\n  function setSearch(val) {\n    searchInput.value = val;\n    searchInput.dispatchEvent(new Event('input', { bubbles: true }));\n    searchInput.dispatchEvent(new Event('change', { bubbles: true }));\n  }\n\n  for (const cat of targetTexts) {\n    // –≤ –ø–æ–∏—Å–∫–æ–≤—É—é —Å—Ç—Ä–æ–∫—É –ø–∏—à–µ–º —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç—å –î–û —Ç–∏—Ä–µ\n    const searchPart = cat.split('-')[0].trim();\n    const normTargetPrefix = normalize(searchPart);\n\n    setSearch(searchPart);\n    await new Promise(r => setTimeout(r, 300));\n\n    const items = document.querySelectorAll('.vs-repeat-repeated-element');\n    let clicked = false;\n\n    items.forEach(item => {\n      if (clicked) return;\n      const raw = (item.textContent || '').trim();\n      const norm = normalize(raw);\n\n      if (norm.startsWith(normTargetPrefix)) {\n        const box =\n          item.querySelector('md-checkbox .md-container') ||\n          item.querySelector('md-checkbox') ||\n          item.querySelector('.md-container');\n\n        if (box) {\n          realClick(box);\n          console.log('‚úÖ –≤—ã–±—Ä–∞–ª:', raw);\n          clicked = true;\n        }\n      }\n    });\n\n    if (!clicked) {\n      console.warn('‚ö†Ô∏è –Ω–µ –Ω–∞—à—ë–ª –ø–æ –ø—Ä–µ—Ñ–∏–∫—Å—É:', searchPart);\n    }\n\n    setSearch('');\n    await new Promise(r => setTimeout(r, 150));\n  }\n\n  const ta = document.querySelector('textarea[ng-model="SurveyComment.PositiveComments"]');\n  if (ta) {\n    ta.value = positiveText;\n    ta.dispatchEvent(new Event('input', { bubbles: true }));\n    ta.dispatchEvent(new Event('change', { bubbles: true }));\n    console.log('üìù –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–π –æ—Ç–∑—ã–≤ –ø—Ä–æ—Å—Ç–∞–≤–ª–µ–Ω');\n  } else {\n    console.warn('textarea —Å ng-model="SurveyComment.PositiveComments" –Ω–µ –Ω–∞–π–¥–µ–Ω');\n  }\n\n  console.log('–ì–æ—Ç–æ–≤–æ.');\n})();`;

      document.getElementById('output').value = finalScript;
      document.getElementById('generated-review').value = normalizedReview;

      const info = document.getElementById('selected-categories-info');
      if (autoCategories.length > 0) {
        info.textContent = '–í—ã–±—Ä–∞–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: ' + autoCategories.join(', ');
      } else {
        info.textContent = '–ü–æ–¥—Ö–æ–¥—è—â–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –£—Ç–æ—á–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏ –∏–ª–∏ –¥–æ–ø–∏—à–∏—Ç–µ –∫–ª—é—á–µ–≤—ã–µ —Ç–µ–º—ã.';
      }
    });
  </script>
</body>
</html>
